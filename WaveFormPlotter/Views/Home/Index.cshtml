@{
    ViewData["Title"] = "Waveform Plotter";
    ViewData["log"] = true;
}

<script src='https://cdn.plot.ly/plotly-2.25.2.min.js'></script>
<script src="https://unpkg.com/hyperscript.org@0.9.11"></script>
<script src="https://cdn.tailwindcss.com"></script>

<div>
    <button _="on click toggle .hidden on logcontainer then toggle .hidden on chartcontainer" type="button"
            class="inline-block rounded bg-slate-600 hover:bg-slate-500 px-6 py-2 text-white">
        Show Logarithmic Scale
    </button>
</div>
<div id="chartcontainer">
    <div class="flex w-full" id="waveformChart"></div>
</div>
<div id="logcontainer" class="w-full hidden">
    <div class="flex w-full" id="LogWaveformChart"></div>
</div>


<script>
    // get the sample data from the ViewData dictionary
    var samples1 = @Html.Raw(Json.Serialize(ViewData["RecordSamples"]));
    var samples2 = @Html.Raw(Json.Serialize(ViewData["SourceSamples"]));

    // create an array of indices for the x values
    var indices1 = Array.from(Array(samples1.length).keys());
    var indices2 = Array.from(Array(samples2.length).keys());

    var layout = {
        yaxis: {
            type: 'log'
        }
    };

    var trace = {
        x: indices1,
        y: samples1,
        type: 'scatter',
        name: 'Source file',
        marker: { size: 10 }
    };

    var trace2 = {

        x: indices2,
        y: samples2,
        type: 'scatter',
        name: 'Recording',
        marker: { size: 10 }

    };

    var data = [trace, trace2];

    Plotly.newPlot('waveformChart', data);
    Plotly.newPlot('LogWaveformChart', data, layout);
</script>